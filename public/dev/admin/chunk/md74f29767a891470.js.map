{"version":3,"file":"md74f29767a891470.js","sources":["../../../../node_modules/.pnpm/tinycrop@1.7.0/node_modules/tinycrop/lib/debounce.js","../../../../node_modules/.pnpm/tinycrop@1.7.0/node_modules/tinycrop/lib/BackgroundLayer.js","../../../../node_modules/.pnpm/tinycrop@1.7.0/node_modules/tinycrop/lib/Rectangle.js","../../../../node_modules/.pnpm/tinycrop@1.7.0/node_modules/tinycrop/lib/ImageLayer.js","../../../../node_modules/.pnpm/tinycrop@1.7.0/node_modules/tinycrop/lib/Listeners.js","../../../../node_modules/.pnpm/tinycrop@1.7.0/node_modules/tinycrop/lib/Selection.js","../../../../node_modules/.pnpm/tinycrop@1.7.0/node_modules/tinycrop/lib/SelectionLayer.js","../../../../node_modules/.pnpm/tinycrop@1.7.0/node_modules/tinycrop/lib/loadImage.js","../../../../node_modules/.pnpm/tinycrop@1.7.0/node_modules/tinycrop/lib/Image.js","../../../../node_modules/.pnpm/tinycrop@1.7.0/node_modules/tinycrop/lib/index.js"],"sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n// http://snippetrepo.com/snippets/basic-vanilla-javascript-throttlingdebounce\nfunction debounce(fn, wait, immediate) {\n  var timeout = void 0;\n  return function () {\n    var context = this;\n    var args = arguments;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      timeout = null;\n      if (!immediate) fn.apply(context, args);\n    }, wait);\n    if (immediate && !timeout) fn.apply(context, args);\n  };\n}\nexports.default = debounce;","\"use strict\";\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BackgroundLayer = function () {\n  function BackgroundLayer() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, BackgroundLayer);\n\n    this.colors = opts.colors;\n    this.parent = opts.parent;\n    this.context = opts.context;\n    this.isDirty = true;\n  }\n\n  _createClass(BackgroundLayer, [{\n    key: \"revalidate\",\n    value: function revalidate() {\n      this.isDirty = true;\n    }\n  }, {\n    key: \"setColors\",\n    value: function setColors(colors) {\n      this.colors = colors;\n    }\n  }, {\n    key: \"paint\",\n    value: function paint() {\n      if (this.isDirty) {\n        var parent = this.parent;\n        var g = this.context;\n\n        if (!this.colors || !this.colors.length) {\n          g.clearRect(0, 0, parent.width, parent.height);\n        } else {\n          g.fillStyle = this.colors[0];\n          g.fillRect(0, 0, parent.width, parent.height);\n        }\n\n        if (this.colors && this.colors.length > 1) {\n          var h = parent.height;\n\n          var cols = 32;\n          var size = parent.width / cols;\n          var rows = Math.ceil(h / size);\n\n          g.fillStyle = this.colors[1];\n          for (var i = 0; i < cols; i += 1) {\n            for (var j = 0; j < rows; j += 1) {\n              if ((i + j) % 2 === 0) {\n                g.fillRect(i * size, j * size, size, size);\n              }\n            }\n          }\n        }\n\n        this.isDirty = false;\n      }\n    }\n  }]);\n\n  return BackgroundLayer;\n}();\n\nBackgroundLayer.create = function (opts) {\n  return new BackgroundLayer(opts);\n};\n\nexports.default = BackgroundLayer;","\"use strict\";\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Rectangle = function () {\n  function Rectangle(x, y, width, height) {\n    _classCallCheck(this, Rectangle);\n\n    this._x = x;\n    this._y = y;\n    this._width = width;\n    this._height = height;\n  }\n\n  _createClass(Rectangle, [{\n    key: \"copy\",\n    value: function copy(_copy) {\n      this._x = _copy.x;\n      this._y = _copy.y;\n      this._width = _copy.width;\n      this._height = _copy.height;\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      return Rectangle.create(this._x, this._y, this._width, this._height);\n    }\n  }, {\n    key: \"round\",\n    value: function round() {\n      var dx = this._x;\n      var dy = this._y;\n      this._x = Math.round(dx);\n      this._y = Math.round(dy);\n      dx -= this._x;\n      dy -= this._y;\n      this._width = Math.round(this._width + dx);\n      this._height = Math.round(this._height + dy);\n      return this;\n    }\n  }, {\n    key: \"isInside\",\n    value: function isInside(point) {\n      return point.x >= this.left && point.y >= this.top && point.x < this.right && point.y < this.bottom;\n    }\n  }]);\n\n  return Rectangle;\n}();\n\nObject.defineProperties(Rectangle.prototype, {\n  x: {\n    get: function get() {\n      return this._x;\n    },\n    set: function set(v) {\n      this._x = v;\n    }\n  },\n  y: {\n    get: function get() {\n      return this._y;\n    },\n    set: function set(v) {\n      this._y = v;\n    }\n  },\n  centerX: {\n    get: function get() {\n      return this._x + this._width * 0.5;\n    },\n    set: function set(v) {\n      this._x = v - this._width * 0.5;\n    }\n  },\n  centerY: {\n    get: function get() {\n      return this._y + this._height * 0.5;\n    },\n    set: function set(v) {\n      this._y = v - this._height * 0.5;\n    }\n  },\n  width: {\n    get: function get() {\n      return this._width;\n    },\n    set: function set(v) {\n      this._width = v;\n    }\n  },\n  height: {\n    get: function get() {\n      return this._height;\n    },\n    set: function set(v) {\n      this._height = v;\n    }\n  },\n  left: {\n    get: function get() {\n      return this._x;\n    },\n    set: function set(v) {\n      this._width = this._x + this._width - v;\n      this._x = v;\n    }\n  },\n  top: {\n    get: function get() {\n      return this._y;\n    },\n    set: function set(v) {\n      this._height = this._y + this._height - v;\n      this._y = v;\n    }\n  },\n  right: {\n    get: function get() {\n      return this._x + this._width;\n    },\n    set: function set(v) {\n      this._width = v - this._x;\n    }\n  },\n  bottom: {\n    get: function get() {\n      return this._y + this._height;\n    },\n    set: function set(v) {\n      this._height = v - this._y;\n    }\n  },\n  aspectRatio: {\n    get: function get() {\n      return this._width / this._height;\n    }\n  }\n});\n\nRectangle.create = function (x, y, width, height) {\n  return new Rectangle(x, y, width, height);\n};\n\nexports.default = Rectangle;","'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Rectangle = require('./Rectangle.js');\n\nvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ImageLayer = function () {\n  function ImageLayer() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, ImageLayer);\n\n    this.bounds = _Rectangle2.default.create(0, 0, 0, 0);\n    this.image = opts.image || null;\n    this.parent = opts.parent;\n    this.context = opts.context;\n  }\n\n  _createClass(ImageLayer, [{\n    key: 'setImage',\n    value: function setImage(image) {\n      this.image = image;\n    }\n  }, {\n    key: 'revalidate',\n    value: function revalidate() {\n      var parent = this.parent;\n      var image = this.image;\n      var bounds = this.bounds;\n\n      if (image) {\n        // Constrained by width (otherwise height)\n        if (image.width / image.height >= parent.width / parent.height) {\n          bounds.width = parent.width;\n          bounds.height = Math.ceil(image.height / image.width * parent.width);\n          bounds.x = 0;\n          bounds.y = Math.floor((parent.height - bounds.height) * 0.5);\n        } else {\n          bounds.width = Math.ceil(image.width / image.height * parent.height);\n          bounds.height = parent.height;\n          bounds.x = Math.floor((parent.width - bounds.width) * 0.5);\n          bounds.y = 0;\n        }\n      }\n    }\n  }, {\n    key: 'paint',\n    value: function paint() {\n      var g = this.context;\n      var image = this.image;\n      var bounds = this.bounds;\n\n      if (image && image.hasLoaded) {\n        g.drawImage(image.source, 0, 0, image.width, image.height, bounds.x, bounds.y, bounds.width, bounds.height);\n      }\n    }\n  }]);\n\n  return ImageLayer;\n}();\n\nImageLayer.create = function (opts) {\n  return new ImageLayer(opts);\n};\n\nexports.default = ImageLayer;","\"use strict\";\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Listeners = function () {\n  function Listeners(opts) {\n    _classCallCheck(this, Listeners);\n\n    this.events = {};\n  }\n\n  _createClass(Listeners, [{\n    key: \"on\",\n    value: function on(type, fn) {\n      if (!this.events[type]) {\n        this.events[type] = [];\n      }\n\n      if (this.events[type].indexOf(fn) === -1) {\n        this.events[type].push(fn);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(type, fn) {\n      if (this.events[type]) {\n        var i = this.events[type].indexOf(fn);\n        if (i !== -1) {\n          this.events[type].splice(i, 1);\n        }\n      }\n\n      return this;\n    }\n  }, {\n    key: \"notify\",\n    value: function notify(type, data) {\n      var _this = this;\n\n      if (this.events[type]) {\n        this.events[type].forEach(function (fn) {\n          fn.call(_this, data);\n        });\n      }\n    }\n  }, {\n    key: \"clearAll\",\n    value: function clearAll() {\n      this.events = {};\n    }\n  }]);\n\n  return Listeners;\n}();\n\nListeners.create = function (opts) {\n  return new Listeners(opts);\n};\n\nexports.default = Listeners;","'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Rectangle = require('./Rectangle.js');\n\nvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Selection = function () {\n  function Selection(opts) {\n    _classCallCheck(this, Selection);\n\n    this.target = opts.target || null;\n    this.bounds = _Rectangle2.default.create(0, 0, 0, 0);\n    this.boundsPx = _Rectangle2.default.create(0, 0, 0, 0);\n    this.region = _Rectangle2.default.create(0, 0, 0, 0);\n\n    this.initialOpts = {\n      x: opts.x,\n      y: opts.y,\n      width: opts.width,\n      height: opts.height\n    };\n\n    this.aspectRatio = opts.aspectRatio;\n    this.minWidth = opts.minWidth !== undefined ? opts.minWidth : 100;\n    this.minHeight = opts.minHeight !== undefined ? opts.minHeight : 100;\n\n    this.boundsMinWidth = 0;\n    this.boundsMinHeight = 0;\n\n    this._delta = { x: 0, h: 0 };\n  }\n\n  _createClass(Selection, [{\n    key: 'getBoundsLengthForRegion',\n    value: function getBoundsLengthForRegion(regionLen) {\n      return regionLen / this.region.width * this.width;\n    }\n  }, {\n    key: 'moveBy',\n    value: function moveBy(dx, dy) {\n      var bounds = this.bounds;\n      var target = this.target;\n\n      bounds.x = Math.min(Math.max(bounds.x + dx, target.bounds.x), target.bounds.x + target.bounds.width - bounds.width);\n      bounds.y = Math.min(Math.max(bounds.y + dy, target.bounds.y), target.bounds.y + target.bounds.height - bounds.height);\n\n      return this.updateRegionFromBounds();\n    }\n  }, {\n    key: 'resizeBy',\n    value: function resizeBy(dx, dy, p) {\n      var delta = this._delta;\n      var aspectRatio = this.aspectRatio;\n      var bounds = this.bounds;\n      var boundsMinWidth = this.boundsMinWidth;\n      var boundsMinHeight = this.boundsMinHeight;\n      var target = this.target;\n\n      function calculateDelta(x, y) {\n        delta.width = bounds.width + x;\n        delta.height = bounds.height + y;\n\n        delta.width = Math.max(boundsMinWidth, delta.width);\n        delta.height = Math.max(boundsMinHeight, delta.height);\n\n        if (aspectRatio) {\n          if (delta.width / delta.height > aspectRatio) {\n            delta.width = delta.height * aspectRatio;\n          } else {\n            delta.height = delta.width / aspectRatio;\n          }\n        }\n\n        delta.width -= bounds.width;\n        delta.height -= bounds.height;\n\n        return delta;\n      }\n\n      if (p[0] === 'n') {\n        dy = Math.min(dy, this.top - target.bounds.top);\n      } else if (p[0] === 's') {\n        dy = Math.min(dy, target.bounds.bottom - this.bottom);\n      }\n\n      if (p[1] === 'w') {\n        dx = Math.min(dx, this.left - target.bounds.left);\n      } else if (p[1] === 'e') {\n        dx = Math.min(dx, target.bounds.right - this.right);\n      }\n\n      delta = calculateDelta(dx, dy);\n\n      switch (p) {\n        case 'nw':\n          this.left -= delta.width;\n          this.top -= delta.height;\n          break;\n        case 'ne':\n          this.right += delta.width;\n          this.top -= delta.height;\n          break;\n        case 'sw':\n          this.left -= delta.width;\n          this.bottom += delta.height;\n          break;\n        case 'se':\n          this.right += delta.width;\n          this.bottom += delta.height;\n          break;\n      }\n\n      return this.updateRegionFromBounds();\n    }\n  }, {\n    key: 'autoSizeRegion',\n    value: function autoSizeRegion() {\n      var target = this.target;\n      var region = this.region;\n      var aspectRatio = this.aspectRatio;\n      var initialOpts = this.initialOpts;\n      var beforeX = region.x;\n      var beforeY = region.y;\n      var beforeWidth = region.width;\n      var beforeHeight = region.height;\n\n      region.x = initialOpts.x !== undefined ? initialOpts.x : 0;\n      region.y = initialOpts.y !== undefined ? initialOpts.y : 0;\n\n      region.width = initialOpts.width !== undefined ? initialOpts.width : target.image.width;\n      region.height = initialOpts.height !== undefined ? initialOpts.height : target.image.height;\n\n      if (aspectRatio) {\n        if (region.width / region.height > aspectRatio) {\n          region.width = region.height * aspectRatio;\n        } else {\n          region.height = region.width / aspectRatio;\n        }\n      }\n\n      if (initialOpts.x === undefined) {\n        region.centerX = target.image.width * 0.5;\n      }\n\n      if (initialOpts.y === undefined) {\n        region.centerY = target.image.height * 0.5;\n      }\n\n      region.round();\n\n      this.updateBoundsFromRegion();\n\n      return region.x !== beforeX || region.y !== beforeY || region.width !== beforeWidth || region.height !== beforeHeight;\n    }\n  }, {\n    key: 'updateRegionFromBounds',\n    value: function updateRegionFromBounds() {\n      var target = this.target;\n      var region = this.region;\n      var bounds = this.bounds;\n      var beforeX = region.x;\n      var beforeY = region.y;\n      var beforeWidth = region.width;\n      var beforeHeight = region.height;\n\n      region.x = target.image.width * (bounds.x - target.bounds.x) / target.bounds.width;\n      region.y = target.image.height * (bounds.y - target.bounds.y) / target.bounds.height;\n\n      region.width = target.image.width * (bounds.width / target.bounds.width);\n      region.height = target.image.height * (bounds.height / target.bounds.height);\n\n      region.round();\n\n      return region.x !== beforeX || region.y !== beforeY || region.width !== beforeWidth || region.height !== beforeHeight;\n    }\n  }, {\n    key: 'updateBoundsFromRegion',\n    value: function updateBoundsFromRegion() {\n      var target = this.target;\n      var region = this.region;\n      var bounds = this.bounds;\n\n      if (target.image) {\n        bounds.x = target.bounds.x + target.bounds.width * (region.x / target.image.width);\n        bounds.y = target.bounds.y + target.bounds.height * (region.y / target.image.height);\n        bounds.width = target.bounds.width * (region.width / target.image.width);\n        bounds.height = target.bounds.height * (region.height / target.image.height);\n      }\n\n      this.boundsMinWidth = this.getBoundsLengthForRegion(this.minWidth);\n      this.boundsMinHeight = this.getBoundsLengthForRegion(this.minHeight);\n    }\n  }, {\n    key: 'isInside',\n    value: function isInside(point) {\n      return this.bounds.isInside(point);\n    }\n  }]);\n\n  return Selection;\n}();\n\nObject.defineProperties(Selection.prototype, {\n  x: {\n    get: function get() {\n      return this.bounds.x;\n    },\n    set: function set(v) {\n      this.bounds.x = v;\n    }\n  },\n  y: {\n    get: function get() {\n      return this.bounds.y;\n    },\n    set: function set(v) {\n      this.bounds.y = v;\n    }\n  },\n  width: {\n    get: function get() {\n      return this.bounds.width;\n    },\n    set: function set(v) {\n      this.bounds.width = v;\n    }\n  },\n  height: {\n    get: function get() {\n      return this.bounds.height;\n    },\n    set: function set(v) {\n      this.bounds.height = v;\n    }\n  },\n  left: {\n    get: function get() {\n      return this.bounds.x;\n    },\n    set: function set(v) {\n      this.bounds.left = v;\n    }\n  },\n  top: {\n    get: function get() {\n      return this.bounds.y;\n    },\n    set: function set(v) {\n      this.bounds.top = v;\n    }\n  },\n  right: {\n    get: function get() {\n      return this.bounds.right;\n    },\n    set: function set(v) {\n      this.bounds.right = v;\n    }\n  },\n  bottom: {\n    get: function get() {\n      return this.bounds.bottom;\n    },\n    set: function set(v) {\n      this.bounds.bottom = v;\n    }\n  }\n});\n\nSelection.create = function (opts) {\n  return new Selection(opts);\n};\n\nexports.default = Selection;","'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _tinytouch = require('tinytouch');\n\nvar _tinytouch2 = _interopRequireDefault(_tinytouch);\n\nvar _Listeners = require('./Listeners.js');\n\nvar _Listeners2 = _interopRequireDefault(_Listeners);\n\nvar _Selection = require('./Selection.js');\n\nvar _Selection2 = _interopRequireDefault(_Selection);\n\nvar _Rectangle = require('./Rectangle.js');\n\nvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SelectionLayer = function () {\n  function SelectionLayer() {\n    var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, SelectionLayer);\n\n    this.selection = _Selection2.default.create(opts);\n\n    this.parent = opts.parent;\n    this.context = opts.context;\n    this.context.setLineDash = this.context.setLineDash || function () {};\n    this.target = opts.target;\n\n    var handleOpts = opts.handle || {};\n    handleOpts.length = handleOpts.handleLength || 32;\n    handleOpts.depth = handleOpts.depth || 3;\n    handleOpts.size = handleOpts.size || handleOpts.length * 2;\n    handleOpts.color = handleOpts.color || 'rgba(255, 255, 255, 1.0)';\n    handleOpts.activeColor = handleOpts.activeColor || 'rgba(255, 0, 160, 1.0)';\n    this.handleOpts = handleOpts;\n\n    this.listeners = _Listeners2.default.create();\n\n    this.touch = (0, _tinytouch2.default)(this.parent.canvas);\n\n    this.activeRegion = null;\n    this.downBounds = _Rectangle2.default.create(0, 0, 0, 0);\n\n    this.touch.on('down', this.onInputDown.bind(this)).on('move', this.onInputMove.bind(this)).on('up', this.onInputUpOrCancel.bind(this)).on('cancel', this.onInputUpOrCancel.bind(this));\n  }\n\n  _createClass(SelectionLayer, [{\n    key: 'onInputDown',\n    value: function onInputDown(e) {\n      var hitRegion = this.findHitRegion(e);\n\n      if (hitRegion) {\n        e.source.preventDefault();\n        this.activeRegion = hitRegion;\n        this.setCursor(hitRegion);\n        this.downBounds.copy(this.selection.bounds);\n        this.listeners.notify('start', this.selection.region);\n      }\n    }\n  }, {\n    key: 'onInputMove',\n    value: function onInputMove(e) {\n      var activeRegion = this.activeRegion;\n\n      if (!activeRegion) {\n        var hitRegion = this.findHitRegion(e);\n        if (hitRegion) {\n          e.source.preventDefault();\n          this.setCursor(hitRegion);\n        } else {\n          this.resetCursor();\n        }\n      } else {\n        e.source.preventDefault();\n\n        var selection = this.selection;\n        var hasChanged = false;\n        selection.bounds.copy(this.downBounds);\n\n        if (activeRegion === 'move') {\n          hasChanged = selection.moveBy(e.tx, e.ty);\n          if (hasChanged) {\n            this.listeners.notify('move', this.selection.region);\n          }\n        } else {\n          var dir = activeRegion.substring(0, 2);\n          var dx = dir[1] === 'w' ? -e.tx : e.tx;\n          var dy = dir[0] === 'n' ? -e.ty : e.ty;\n          hasChanged = selection.resizeBy(dx, dy, dir);\n          if (hasChanged) {\n            this.listeners.notify('resize', this.selection.region);\n          }\n        }\n\n        if (hasChanged) {\n          this.listeners.notify('change', this.selection.region);\n        }\n      }\n    }\n  }, {\n    key: 'onInputUpOrCancel',\n    value: function onInputUpOrCancel(e) {\n      e.source.preventDefault();\n      if (this.activeRegion) {\n        this.activeRegion = null;\n        this.resetCursor();\n        this.listeners.notify('end', this.selection.region);\n      }\n    }\n  }, {\n    key: 'findHitRegion',\n    value: function findHitRegion(point) {\n      var hitRegion = null;\n      var closest = Number.MAX_VALUE;\n\n      var d = this.isWithinNorthWestHandle(point);\n      if (d !== false && d < closest) {\n        closest = d;\n        hitRegion = 'nw-resize';\n      }\n\n      d = this.isWithinNorthEastHandle(point);\n      if (d !== false && d < closest) {\n        closest = d;\n        hitRegion = 'ne-resize';\n      }\n\n      d = this.isWithinSouthWestHandle(point);\n      if (d !== false && d < closest) {\n        closest = d;\n        hitRegion = 'sw-resize';\n      }\n\n      d = this.isWithinSouthEastHandle(point);\n      if (d !== false && d < closest) {\n        closest = d;\n        hitRegion = 'se-resize';\n      }\n\n      if (hitRegion) {\n        return hitRegion;\n      } else if (this.isWithinBounds(point)) {\n        return 'move';\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: 'on',\n    value: function on(type, fn) {\n      this.listeners.on(type, fn);\n      return this;\n    }\n  }, {\n    key: 'off',\n    value: function off(type, fn) {\n      this.listeners.off(type, fn);\n      return this;\n    }\n  }, {\n    key: 'setCursor',\n    value: function setCursor(type) {\n      if (this.parent.canvas.style.cursor !== type) {\n        this.parent.canvas.style.cursor = type;\n      }\n    }\n  }, {\n    key: 'resetCursor',\n    value: function resetCursor() {\n      this.setCursor('auto');\n    }\n  }, {\n    key: 'isWithinRadius',\n    value: function isWithinRadius(ax, ay, bx, by, r) {\n      var tsq = r * r;\n      var dx = ax - bx;\n      var dy = ay - by;\n      var dsq = dx * dx + dy * dy;\n      return dsq < tsq ? dsq : false;\n    }\n  }, {\n    key: 'isWithinNorthWestHandle',\n    value: function isWithinNorthWestHandle(point) {\n      return this.isWithinRadius(point.x, point.y, this.selection.left, this.selection.top, this.getHandleRadius());\n    }\n  }, {\n    key: 'isWithinNorthEastHandle',\n    value: function isWithinNorthEastHandle(point) {\n      return this.isWithinRadius(point.x, point.y, this.selection.right, this.selection.top, this.getHandleRadius());\n    }\n  }, {\n    key: 'isWithinSouthWestHandle',\n    value: function isWithinSouthWestHandle(point) {\n      return this.isWithinRadius(point.x, point.y, this.selection.left, this.selection.bottom, this.getHandleRadius());\n    }\n  }, {\n    key: 'isWithinSouthEastHandle',\n    value: function isWithinSouthEastHandle(point) {\n      return this.isWithinRadius(point.x, point.y, this.selection.right, this.selection.bottom, this.getHandleRadius());\n    }\n  }, {\n    key: 'isWithinBounds',\n    value: function isWithinBounds(point) {\n      return this.selection.isInside(point);\n    }\n  }, {\n    key: 'getHandleRadius',\n    value: function getHandleRadius() {\n      return this.handleOpts.size / 2;\n    }\n  }, {\n    key: 'onImageLoad',\n    value: function onImageLoad() {\n      this.autoSizeRegionAndNotify();\n    }\n  }, {\n    key: 'setAspectRatio',\n    value: function setAspectRatio(aspectRatio) {\n      this.selection.aspectRatio = aspectRatio;\n      this.autoSizeRegionAndNotify();\n    }\n  }, {\n    key: 'autoSizeRegionAndNotify',\n    value: function autoSizeRegionAndNotify() {\n      var hasChanged = this.selection.autoSizeRegion();\n      if (hasChanged) {\n        this.listeners.notify('change', this.selection.region);\n      }\n    }\n  }, {\n    key: 'revalidate',\n    value: function revalidate() {\n      this.selection.updateBoundsFromRegion();\n    }\n  }, {\n    key: 'paint',\n    value: function paint() {\n      this.selection.boundsPx.copy(this.selection.bounds).round();\n\n      this.paintOutside();\n      this.paintInside();\n    }\n  }, {\n    key: 'paintOutside',\n    value: function paintOutside() {\n      var bounds = this.selection.boundsPx;\n      var g = this.context;\n      var target = this.target;\n\n      var tl = target.bounds.x;\n      var tt = target.bounds.y;\n      var tw = target.bounds.width;\n      var tr = target.bounds.right;\n      var tb = target.bounds.bottom;\n\n      var bl = bounds.x;\n      var bt = bounds.y;\n      var bh = bounds.height;\n      var br = bounds.right;\n      var bb = bounds.bottom;\n\n      g.fillStyle = 'rgba(0, 0, 0, 0.5)';\n      g.fillRect(tl, tt, tw, bt - tt);\n      g.fillRect(tl, bt, bl - tl, bh);\n      g.fillRect(br, bt, tr - br, bh);\n      g.fillRect(tl, bb, tw, tb - bb);\n    }\n  }, {\n    key: 'paintInside',\n    value: function paintInside() {\n      var g = this.context;\n      var bounds = this.selection.boundsPx;\n      var activeRegion = this.activeRegion;\n      var opts = this.handleOpts;\n\n      var lengthWidth = Math.min(opts.length, bounds.width * 0.5);\n      var lengthHeight = Math.min(opts.length, bounds.height * 0.5);\n      var depth = opts.depth;\n      var color = opts.color;\n      var activeColor = opts.activeColor;\n      var length = 0; // TODO: CHECK\n\n      // Sides\n      g.fillStyle = 'rgba(255, 255, 255, 0.3)';\n      g.fillRect(bounds.x + length, bounds.y, bounds.width - 2 * length, depth);\n      g.fillRect(bounds.x + length, bounds.bottom - depth, bounds.width - 2 * length, depth);\n      g.fillRect(bounds.x, bounds.y + length, depth, bounds.height - 2 * length);\n      g.fillRect(bounds.right - depth, bounds.y + length, depth, bounds.height - 2 * length);\n\n      // Handles\n      var isMoveRegion = activeRegion === 'move';\n\n      g.fillStyle = isMoveRegion || activeRegion === 'nw-resize' ? activeColor : color;\n      g.fillRect(bounds.x, bounds.y, lengthWidth, depth);\n      g.fillRect(bounds.x, bounds.y + depth, depth, lengthHeight - depth);\n\n      g.fillStyle = isMoveRegion || activeRegion === 'ne-resize' ? activeColor : color;\n      g.fillRect(bounds.right - lengthWidth, bounds.y, lengthWidth, depth);\n      g.fillRect(bounds.right - depth, bounds.y + depth, depth, lengthHeight - depth);\n\n      g.fillStyle = isMoveRegion || activeRegion === 'sw-resize' ? activeColor : color;\n      g.fillRect(bounds.x, bounds.bottom - depth, lengthWidth, depth);\n      g.fillRect(bounds.x, bounds.bottom - lengthHeight, depth, lengthHeight - depth);\n\n      g.fillStyle = isMoveRegion || activeRegion === 'se-resize' ? activeColor : color;\n      g.fillRect(bounds.right - lengthWidth, bounds.bottom - depth, lengthWidth, depth);\n      g.fillRect(bounds.right - depth, bounds.bottom - lengthHeight, depth, lengthHeight - depth);\n\n      // Guides\n      g.strokeStyle = 'rgba(255, 255, 255, 0.6)';\n      g.setLineDash([2, 3]);\n      g.lineWidth = 1;\n      g.beginPath();\n      var bw3 = bounds.width / 3;\n      var bh3 = bounds.height / 3;\n      g.moveTo(bounds.x + bw3, bounds.y);\n      g.lineTo(bounds.x + bw3, bounds.y + bounds.height);\n      g.moveTo(bounds.x + 2 * bw3, bounds.y);\n      g.lineTo(bounds.x + 2 * bw3, bounds.y + bounds.height);\n      g.moveTo(bounds.x, bounds.y + bh3);\n      g.lineTo(bounds.x + bounds.width, bounds.y + bh3);\n      g.moveTo(bounds.x, bounds.y + 2 * bh3);\n      g.lineTo(bounds.x + bounds.width, bounds.y + 2 * bh3);\n      g.stroke();\n      g.closePath();\n    }\n  }]);\n\n  return SelectionLayer;\n}();\n\nSelectionLayer.create = function (opts) {\n  return new SelectionLayer(opts);\n};\n\nexports.default = SelectionLayer;","'use strict';\n\nexports.__esModule = true;\n/*\n * Modified version of http://github.com/desandro/imagesloaded v2.1.1\n * MIT License.\n */\n\nvar BLANK = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';\n\nfunction loadImage(image, callback) {\n  if (!image.nodeName || image.nodeName.toLowerCase() !== 'img') {\n    return callback(new Error('First argument must an image element'));\n  }\n\n  if (image.src && image.complete && image.naturalWidth !== undefined) {\n    return callback(null, true);\n  }\n\n  image.addEventListener('load', function () {\n    callback(null, false);\n  });\n\n  image.addEventListener('error', function (e) {\n    callback(new Error('Failed to load image \\'' + (image.src || '') + '\\''));\n  });\n\n  if (image.complete) {\n    var src = image.src;\n    image.src = BLANK;\n    image.src = src;\n  }\n}\n\nexports.default = loadImage;","'use strict';\n\nexports.__esModule = true;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _loadImage = require('./loadImage.js');\n\nvar _loadImage2 = _interopRequireDefault(_loadImage);\n\nvar _Listeners = require('./Listeners.js');\n\nvar _Listeners2 = _interopRequireDefault(_Listeners);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Image = function () {\n  function Image(source) {\n    var _this = this;\n\n    _classCallCheck(this, Image);\n\n    this.width = 0;\n    this.height = 0;\n\n    this.hasLoaded = false;\n    this.src = null;\n\n    this.listeners = _Listeners2.default.create();\n\n    if (!source) {\n      return;\n    }\n\n    if (typeof source === 'string') {\n      this.src = source;\n      var img = document.createElement('img');\n      img.src = this.src;\n      source = img;\n    } else {\n      this.src = source.src;\n    }\n\n    this.source = source;\n\n    (0, _loadImage2.default)(source, function (err) {\n      if (err) {\n        _this.notify('error', err);\n      } else {\n        _this.hasLoaded = true;\n        _this.width = source.naturalWidth;\n        _this.height = source.naturalHeight;\n        _this.notify('load', _this);\n      }\n    });\n  }\n\n  _createClass(Image, [{\n    key: 'getAspectRatio',\n    value: function getAspectRatio() {\n      if (!this.hasLoaded) {\n        return 1;\n      }\n\n      return this.width / this.height;\n    }\n  }, {\n    key: 'notify',\n    value: function notify(type, data) {\n      var listeners = this.listeners;\n      setTimeout(function () {\n        listeners.notify(type, data);\n      }, 0);\n    }\n  }, {\n    key: 'on',\n    value: function on(type, fn) {\n      this.listeners.on(type, fn);\n      return this;\n    }\n  }, {\n    key: 'off',\n    value: function off(type, fn) {\n      this.listeners.off(type, fn);\n      return this;\n    }\n  }]);\n\n  return Image;\n}();\n\nImage.create = function (source) {\n  return new Image(source);\n};\n\nexports.default = Image;","'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _debounce = require('./debounce.js');\n\nvar _debounce2 = _interopRequireDefault(_debounce);\n\nvar _BackgroundLayer = require('./BackgroundLayer.js');\n\nvar _BackgroundLayer2 = _interopRequireDefault(_BackgroundLayer);\n\nvar _ImageLayer = require('./ImageLayer.js');\n\nvar _ImageLayer2 = _interopRequireDefault(_ImageLayer);\n\nvar _SelectionLayer = require('./SelectionLayer.js');\n\nvar _SelectionLayer2 = _interopRequireDefault(_SelectionLayer);\n\nvar _Image = require('./Image.js');\n\nvar _Image2 = _interopRequireDefault(_Image);\n\nvar _Listeners = require('./Listeners.js');\n\nvar _Listeners2 = _interopRequireDefault(_Listeners);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DEFAULT_CANVAS_WIDTH = 400;\nvar DEFAULT_CANVAS_HEIGHT = 300;\n\nvar Crop = function () {\n  function Crop(opts) {\n    _classCallCheck(this, Crop);\n\n    this.parent = typeof opts.parent === 'string' ? document.querySelector(opts.parent) : opts.parent;\n\n    this.canvas = document.createElement('canvas');\n    this.context = this.canvas.getContext('2d');\n    this.boundsOpts = opts.bounds || { width: '100%', height: 'auto' };\n    opts.selection = opts.selection || {};\n    this.debounceResize = opts.debounceResize !== undefined ? opts.debounceResize : true;\n    this.listeners = _Listeners2.default.create();\n\n    this.parent.appendChild(this.canvas);\n\n    this.backgroundLayer = _BackgroundLayer2.default.create({\n      parent: this,\n      context: this.context,\n      colors: opts.backgroundColors || ['#fff', '#f0f0f0']\n    });\n\n    this.imageLayer = _ImageLayer2.default.create({\n      parent: this,\n      context: this.context,\n      image: this.image\n    });\n\n    this.selectionLayer = _SelectionLayer2.default.create({\n      parent: this,\n      context: this.context,\n      target: this.imageLayer,\n      aspectRatio: opts.selection.aspectRatio,\n      minWidth: opts.selection.minWidth,\n      minHeight: opts.selection.minHeight,\n      x: opts.selection.x,\n      y: opts.selection.y,\n      width: opts.selection.width,\n      height: opts.selection.height,\n      handle: {\n        color: opts.selection.color,\n        activeColor: opts.selection.activeColor\n      }\n    });\n\n    var listeners = this.listeners;\n    var paint = this.paint.bind(this);\n\n    this.selectionLayer.on('start', function (region) {\n      paint();\n      listeners.notify('start', region);\n    }).on('move', function (region) {\n      listeners.notify('move', region);\n    }).on('resize', function (region) {\n      listeners.notify('resize', region);\n    }).on('change', function (region) {\n      paint();\n      listeners.notify('change', region);\n    }).on('end', function (region) {\n      paint();\n      listeners.notify('end', region);\n    });\n\n    window.addEventListener('resize', this.debounceResize ? (0, _debounce2.default)(this.revalidateAndPaint.bind(this), 100) : this.revalidateAndPaint.bind(this));\n\n    this.setImage(opts.image, opts.onInit);\n\n    this.revalidateAndPaint();\n  }\n\n  _createClass(Crop, [{\n    key: 'on',\n    value: function on(type, fn) {\n      this.listeners.on(type, fn);\n      return this;\n    }\n  }, {\n    key: 'off',\n    value: function off(type, fn) {\n      this.listeners.off(type, fn);\n      return this;\n    }\n  }, {\n    key: 'revalidateAndPaint',\n    value: function revalidateAndPaint() {\n      this.revalidate();\n      this.paint();\n    }\n  }, {\n    key: 'revalidate',\n    value: function revalidate() {\n      var parent = this.parent;\n      var image = this.image;\n\n      var boundsWidth = this.boundsOpts.width;\n      var boundsHeight = this.boundsOpts.height;\n      var width = 0;\n      var height = 0;\n\n      if (isInteger(boundsWidth)) {\n        width = boundsWidth;\n      } else if (parent && isPercent(boundsWidth)) {\n        width = Math.round(parent.clientWidth * getPercent(boundsWidth) / 100);\n      } else {\n        width = DEFAULT_CANVAS_WIDTH;\n      }\n\n      if (isInteger(boundsHeight)) {\n        height = boundsHeight;\n      } else if (isPercent(boundsHeight)) {\n        height = Math.round(width * getPercent(boundsHeight) / 100);\n      } else if (image && image.hasLoaded && isAuto(boundsHeight)) {\n        height = Math.floor(width / image.getAspectRatio());\n      } else {\n        height = DEFAULT_CANVAS_HEIGHT;\n      }\n\n      this.resizeCanvas(width, height);\n\n      this.backgroundLayer.revalidate();\n      this.imageLayer.revalidate();\n      this.selectionLayer.revalidate();\n    }\n  }, {\n    key: 'paint',\n    value: function paint() {\n      var g = this.context;\n\n      g.save();\n      g.scale(this.ratio, this.ratio);\n\n      this.backgroundLayer.paint();\n\n      if (this.image && this.image.hasLoaded) {\n        this.imageLayer.paint();\n        this.selectionLayer.paint();\n      }\n\n      g.restore();\n    }\n  }, {\n    key: 'resizeCanvas',\n    value: function resizeCanvas(width, height) {\n      var canvas = this.canvas;\n      this.ratio = window.devicePixelRatio || 1;\n      this.width = width;\n      this.height = height;\n      canvas.width = this.width * this.ratio;\n      canvas.height = this.height * this.ratio;\n    }\n  }, {\n    key: 'setImage',\n    value: function setImage(source, onLoad) {\n      var _this = this;\n\n      var image = _Image2.default.create(source).on('load', function () {\n        _this.selectionLayer.onImageLoad();\n        _this.revalidateAndPaint();\n        onLoad && onLoad();\n      }).on('error', function (e) {\n        console.error(e);\n      });\n\n      this.imageLayer.setImage(image);\n      this.image = image;\n      this.revalidateAndPaint();\n    }\n  }, {\n    key: 'getImage',\n    value: function getImage() {\n      return this.image;\n    }\n  }, {\n    key: 'setAspectRatio',\n    value: function setAspectRatio(aspectRatio) {\n      this.selectionLayer.setAspectRatio(aspectRatio);\n      this.revalidateAndPaint();\n    }\n  }, {\n    key: 'setBounds',\n    value: function setBounds(opts) {\n      this.boundsOpts = opts;\n      this.revalidateAndPaint();\n    }\n  }, {\n    key: 'setBackgroundColors',\n    value: function setBackgroundColors(colors) {\n      this.backgroundLayer.setColors(colors);\n      this.revalidateAndPaint();\n    }\n  }]);\n\n  return Crop;\n}();\n\nCrop.create = function (opts) {\n  return new Crop(opts);\n};\n\nCrop.prototype.dispose = noop;\n\nfunction noop() {}\n\nfunction isPercent(v) {\n  if (typeof v !== 'string') {\n    return false;\n  }\n\n  if (v.length < 1) {\n    return false;\n  }\n\n  if (v[v.length - 1] === '%') {\n    return true;\n  }\n}\n\nfunction getPercent(v) {\n  if (!isPercent(v)) {\n    return 0;\n  }\n\n  return v.slice(0, -1);\n}\n\nfunction isAuto(v) {\n  return v === 'auto';\n}\n\nfunction isInteger(v) {\n  return typeof v === 'number' && Math.round(v) === v;\n}\n\nmodule.exports = Crop;"],"names":["debounce_1","debounce","fn","wait","immediate","timeout","context","args","BackgroundLayer_1","_createClass","defineProperties","target","props","i","descriptor","Constructor","protoProps","staticProps","_classCallCheck","instance","BackgroundLayer","opts","colors","parent","g","h","cols","size","rows","j","Rectangle_1","Rectangle","x","y","width","height","_copy","dx","dy","point","v","ImageLayer_1","_Rectangle","require$$0","_Rectangle2","_interopRequireDefault","obj","ImageLayer","image","bounds","Listeners_1","Listeners","type","data","_this","Selection_1","Selection","regionLen","p","delta","aspectRatio","boundsMinWidth","boundsMinHeight","calculateDelta","region","initialOpts","beforeX","beforeY","beforeWidth","beforeHeight","SelectionLayer_1","_tinytouch","_tinytouch2","_Listeners","require$$1","_Listeners2","_Selection","require$$2","_Selection2","require$$3","SelectionLayer","handleOpts","e","hitRegion","activeRegion","selection","hasChanged","dir","closest","d","ax","ay","bx","by","r","tsq","dsq","tl","tt","tw","tr","tb","bl","bt","bh","br","bb","lengthWidth","lengthHeight","depth","color","activeColor","length","isMoveRegion","bw3","bh3","loadImage_1","BLANK","loadImage","callback","src","Image_1","_loadImage","_loadImage2","Image","source","img","err","listeners","_debounce","_debounce2","_BackgroundLayer","_BackgroundLayer2","_ImageLayer","_ImageLayer2","_SelectionLayer","_SelectionLayer2","_Image","require$$4","_Image2","require$$5","DEFAULT_CANVAS_WIDTH","DEFAULT_CANVAS_HEIGHT","Crop","paint","boundsWidth","boundsHeight","isInteger","isPercent","getPercent","isAuto","canvas","onLoad","noop","lib"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}