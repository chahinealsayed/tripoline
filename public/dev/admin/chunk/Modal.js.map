{"version":3,"file":"Modal.js","sources":["../../../../resources/js/modules/bootstrap/components/Modal.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { ref, onMounted, onUnmounted } from \"vue\";\r\nimport { ModalSize, ModalFullscreen } from \"../types\";\r\nimport CloseButton from \"./CloseButton.vue\";\r\nimport Modal from \"bootstrap/js/src/modal\";\r\nimport Icon from \"@/components/Icon.vue\";\r\nimport { mdiClose } from \"@mdi/js\";\r\nimport Button from \"./Button.vue\";\r\n\r\ndefineOptions({\r\n  inheritAttrs: false,\r\n});\r\n\r\nexport type Slots = {\r\n  default?: any;\r\n  title?: any;\r\n  header?: any;\r\n  buttons?: any;\r\n};\r\ndefineSlots<Slots>();\r\n\r\nexport type Expose = {\r\n  open: () => void;\r\n  close: () => void;\r\n  dispose: () => void;\r\n  update: () => void;\r\n};\r\n\r\nexport type Props = {\r\n  title?: null | string;\r\n  center?: boolean;\r\n  scrollable?: boolean;\r\n  size?: null | ModalSize;\r\n  fullscreen?: boolean | ModalFullscreen;\r\n  backdrop?: boolean | \"static\";\r\n  focus?: boolean;\r\n  keyboard?: boolean;\r\n  noHeader?: boolean;\r\n  noFooter?: boolean;\r\n  noClose?: boolean;\r\n  controller?: any;\r\n  closeText?: string;\r\n  tag?: string;\r\n  padding?: string;\r\n};\r\nconst {\r\n  title = null,\r\n  center = false,\r\n  scrollable = false,\r\n  size = null,\r\n  fullscreen = false,\r\n  backdrop = \"static\",\r\n  focus = false,\r\n  keyboard = false,\r\n  noHeader = false,\r\n  noFooter = false,\r\n  noClose = false,\r\n  controller = null,\r\n  closeText = \"Close\",\r\n  tag = \"div\",\r\n  padding = \"1rem\",\r\n} = defineProps<Props>();\r\n\r\nconst modalRef = ref<any>(null);\r\nconst modal = ref<any>(null);\r\n\r\ntype Emits = {\r\n  close: any;\r\n  closed: any;\r\n  prevented: any;\r\n  open: any;\r\n  opened: any;\r\n  dismiss: any;\r\n};\r\nconst emit = defineEmits<Emits>();\r\n\r\nconst onClose = (e) => {\r\n  emit(\"close\", e);\r\n};\r\n\r\nconst onClosed = (e) => {\r\n  emit(\"closed\", e);\r\n  if (controller) {\r\n    controller.removeController();\r\n  }\r\n};\r\n\r\nconst onPrevented = (e) => {\r\n  emit(\"prevented\", e);\r\n};\r\n\r\nconst onOpen = (e) => {\r\n  emit(\"open\", e);\r\n};\r\n\r\nconst onOpened = (e) => {\r\n  emit(\"opened\", e);\r\n};\r\n\r\nconst dismiss = (e) => {\r\n  emit(\"dismiss\", e);\r\n};\r\n\r\nconst create = () => {\r\n  modal.value = new Modal(modalRef.value, {\r\n    backdrop,\r\n    focus,\r\n    keyboard,\r\n  });\r\n  modalRef.value?.addEventListener?.(\"hide.bs.modal\", onClose);\r\n  modalRef.value?.addEventListener?.(\"hidden.bs.modal\", onClosed);\r\n  modalRef.value?.addEventListener?.(\"hidePrevented.bs.modal\", onPrevented);\r\n  modalRef.value?.addEventListener?.(\"show.bs.modal\", onOpen);\r\n  modalRef.value?.addEventListener?.(\"shown.bs.modal\", onOpened);\r\n};\r\n\r\nconst open = () => {\r\n  modal.value?.show?.();\r\n};\r\n\r\nconst close = () => {\r\n  modal.value?.hide?.();\r\n};\r\n\r\nconst dispose = () => {\r\n  modalRef.value?.removeEventListener?.(\"hide.bs.modal\", onClose);\r\n  modalRef.value?.removeEventListener?.(\"hidden.bs.modal\", onClosed);\r\n  modalRef.value?.removeEventListener?.(\"hidePrevented.bs.modal\", onPrevented);\r\n  modalRef.value?.removeEventListener?.(\"show.bs.modal\", onOpen);\r\n  modalRef.value?.removeEventListener?.(\"shown.bs.modal\", onOpened);\r\n  modalRef.value?.dispose?.();\r\n};\r\n\r\nconst update = () => {\r\n  modal.value?.handleUpdate?.();\r\n};\r\n\r\ndefineExpose<Expose>({ open, close, dispose, update });\r\n\r\nonMounted(() => {\r\n  create();\r\n});\r\n\r\nonUnmounted(() => {\r\n  dispose();\r\n});\r\n</script>\r\n<template>\r\n  <Teleport to=\"body\">\r\n    <component\r\n      :is=\"tag\"\r\n      ref=\"modalRef\"\r\n      class=\"modal fade\"\r\n      tabindex=\"-1\"\r\n      v-bind=\"$attrs\"\r\n    >\r\n      <div\r\n        class=\"modal-dialog\"\r\n        :class=\"{\r\n          'modal-dialog-centered': center,\r\n          'modal-dialog-scrollable': scrollable,\r\n          ...(size ? { [`modal-${size}`]: true } : {}),\r\n          ...(fullscreen\r\n            ? {\r\n                [`modal-fullscreen${\r\n                  typeof fullscreen === 'string' ? `-${fullscreen}-down` : ''\r\n                }`]: true,\r\n              }\r\n            : {}),\r\n        }\"\r\n      >\r\n        <div class=\"modal-content\">\r\n          <div v-if=\"!noHeader\" class=\"modal-header\">\r\n            <slot name=\"title\">\r\n              <h5 class=\"modal-title\">{{ title }}</h5>\r\n            </slot>\r\n            <slot name=\"header\"></slot>\r\n            <template v-if=\"!noClose\">\r\n              <CloseButton\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n                @click=\"dismiss\"\r\n              />\r\n            </template>\r\n          </div>\r\n          <div\r\n            v-if=\"$slots.default\"\r\n            class=\"modal-body\"\r\n            :style=\"{ '--bs-modal-padding': padding }\"\r\n          >\r\n            <slot></slot>\r\n          </div>\r\n          <div v-if=\"!noFooter\" class=\"modal-footer\">\r\n            <div class=\"d-flex flex-row gap-3\">\r\n              <template v-if=\"!noClose\">\r\n                <Button color=\"dark\" data-bs-dismiss=\"modal\" @click=\"dismiss\">\r\n                  <Icon :path=\"mdiClose\" />{{ closeText }}\r\n                </Button>\r\n              </template>\r\n              <slot name=\"buttons\"></slot>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </component>\r\n  </Teleport>\r\n</template>\r\n"],"names":["modalRef","ref","modal","onClose","emit","onClosed","__props","onPrevented","onOpen","onOpened","dismiss","create","Modal","_b","_a","_d","_c","_f","_e","_h","_g","_j","_i","open","close","dispose","_l","_k","__expose","onMounted","onUnmounted"],"mappings":"isCA+DM,MAAAA,EAAWC,EAAS,IAAI,EACxBC,EAAQD,EAAS,IAAI,EAYrBE,EAAW,GAAM,CACrBC,EAAK,QAAS,CAAC,CAAA,EAGXC,EAAY,GAAM,CACtBD,EAAK,SAAU,CAAC,EACZE,EAAU,YACZA,EAAU,WAAC,kBACb,EAGIC,EAAe,GAAM,CACzBH,EAAK,YAAa,CAAC,CAAA,EAGfI,EAAU,GAAM,CACpBJ,EAAK,OAAQ,CAAC,CAAA,EAGVK,EAAY,GAAM,CACtBL,EAAK,SAAU,CAAC,CAAA,EAGZM,EAAW,GAAM,CACrBN,EAAK,UAAW,CAAC,CAAA,EAGbO,EAAS,IAAM,yBACnBT,EAAM,MAAQ,IAAIU,EAAMZ,EAAS,MAAO,CACtC,SAAQM,EAAA,SACR,MAAKA,EAAA,MACL,SAAQA,EAAA,QAAA,CACT,GACQO,GAAAC,EAAAd,EAAA,QAAA,YAAAc,EAAO,mBAAP,MAAAD,EAAA,KAAAC,EAA0B,gBAAiBX,IAC3CY,GAAAC,EAAAhB,EAAA,QAAA,YAAAgB,EAAO,mBAAP,MAAAD,EAAA,KAAAC,EAA0B,kBAAmBX,IAC7CY,GAAAC,EAAAlB,EAAA,QAAA,YAAAkB,EAAO,mBAAP,MAAAD,EAAA,KAAAC,EAA0B,yBAA0BX,IACpDY,GAAAC,EAAApB,EAAA,QAAA,YAAAoB,EAAO,mBAAP,MAAAD,EAAA,KAAAC,EAA0B,gBAAiBZ,IAC3Ca,GAAAC,EAAAtB,EAAA,QAAA,YAAAsB,EAAO,mBAAP,MAAAD,EAAA,KAAAC,EAA0B,iBAAkBb,EAAQ,EAGzDc,EAAO,IAAM,UACjBV,GAAAC,EAAAZ,EAAM,QAAN,YAAAY,EAAa,OAAb,MAAAD,EAAA,KAAAC,EAAoB,EAGhBU,EAAQ,IAAM,UAClBX,GAAAC,EAAAZ,EAAM,QAAN,YAAAY,EAAa,OAAb,MAAAD,EAAA,KAAAC,EAAoB,EAGhBW,EAAU,IAAM,8BACXZ,GAAAC,EAAAd,EAAA,QAAA,YAAAc,EAAO,sBAAP,MAAAD,EAAA,KAAAC,EAA6B,gBAAiBX,IAC9CY,GAAAC,EAAAhB,EAAA,QAAA,YAAAgB,EAAO,sBAAP,MAAAD,EAAA,KAAAC,EAA6B,kBAAmBX,IAChDY,GAAAC,EAAAlB,EAAA,QAAA,YAAAkB,EAAO,sBAAP,MAAAD,EAAA,KAAAC,EAA6B,yBAA0BX,IACvDY,GAAAC,EAAApB,EAAA,QAAA,YAAAoB,EAAO,sBAAP,MAAAD,EAAA,KAAAC,EAA6B,gBAAiBZ,IAC9Ca,GAAAC,EAAAtB,EAAA,QAAA,YAAAsB,EAAO,sBAAP,MAAAD,EAAA,KAAAC,EAA6B,iBAAkBb,IACxDiB,GAAAC,EAAA3B,EAAS,QAAT,YAAA2B,EAAgB,UAAhB,MAAAD,EAAA,KAAAC,EAA0B,EAO5B,OAAAC,EAAqB,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,OAJ9B,IAAM,UACnBZ,GAAAC,EAAAZ,EAAM,QAAN,YAAAY,EAAa,eAAb,MAAAD,EAAA,KAAAC,EAA4B,CAGuB,CAAA,EAErDe,EAAU,IAAM,CACPlB,GAAA,CACR,EAEDmB,EAAY,IAAM,CACRL,GAAA,CACT"}