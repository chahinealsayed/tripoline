{"version":3,"file":"string.js","sources":["../../../../resources/js/modules/form/rules/string.ts"],"sourcesContent":["import { createPrivateField } from \"@/lib/private\";\r\nimport { Rule } from \"../lib/rule\";\r\n\r\nconst [trim, setTrim] = createPrivateField<StringRule, true>();\r\nconst [min, setMin] = createPrivateField<StringRule, number>();\r\nconst [max, setMax] = createPrivateField<StringRule, number>();\r\nconst [length, setLength] = createPrivateField<StringRule, number>();\r\n\r\nexport class StringRule extends Rule {\r\n  #trim: boolean;\r\n  #min: number;\r\n  #max: number;\r\n  #length: number;\r\n\r\n  get isString(): boolean {\r\n    return typeof this.field.value === \"string\";\r\n  }\r\n\r\n  execute(): void {\r\n    if (this.isString && trim(this)) {\r\n      this.field.silentUpdate(this.field.value.trim());\r\n    }\r\n  }\r\n\r\n  trim() {\r\n    setTrim(this, true);\r\n    return this;\r\n  }\r\n\r\n  min(value: number) {\r\n    setMin(this, value);\r\n    return this;\r\n  }\r\n\r\n  max(value: number) {\r\n    setMax(this, value);\r\n    return this;\r\n  }\r\n\r\n  length(value: number) {\r\n    setLength(this, value);\r\n    return this;\r\n  }\r\n\r\n  get defaultMessage(): string {\r\n    if (!this.isString) {\r\n      return \"{attribute} should be a string\";\r\n    } else if (\r\n      typeof min(this) !== \"undefined\" &&\r\n      typeof max(this) !== \"undefined\" &&\r\n      (this.field.value.length < min(this) ||\r\n        this.field.value.length > max(this))\r\n    ) {\r\n      return `{attribute} should be between ${min(this)} and ${max(\r\n        this\r\n      )} characters.`;\r\n    } else if (\r\n      typeof min(this) !== \"undefined\" &&\r\n      this.field.value.length < min(this)\r\n    ) {\r\n      return `{attribute} should be bigger than or equal ${min(\r\n        this\r\n      )} characters.`;\r\n    } else if (\r\n      typeof max(this) !== \"undefined\" &&\r\n      this.field.value.length > max(this)\r\n    ) {\r\n      return `{attribute} should be less than or equal $max(this)} characters.`;\r\n    } else if (\r\n      typeof length(this) !== \"undefined\" &&\r\n      this.field.value.length !== length(this)\r\n    ) {\r\n      return `{attribute} should be equal ${length(this)} characters.`;\r\n    }\r\n    return \"\";\r\n  }\r\n  validate(): Promise<boolean> {\r\n    return new Promise((resolve) => {\r\n      resolve(\r\n        this.isString &&\r\n          ((!this.field.value && this.isSkipOnEmpty) ||\r\n            ((typeof min(this) === \"undefined\" ||\r\n              this.field.value.length >= min(this)) &&\r\n              (typeof max(this) === \"undefined\" ||\r\n                this.field.value.length <= max(this)) &&\r\n              (typeof length(this) === \"undefined\" ||\r\n                this.field.value.length === length(this))))\r\n      );\r\n    });\r\n  }\r\n}\r\n"],"names":["trim","setTrim","createPrivateField","min","setMin","max","setMax","length","setLength","StringRule","Rule","__privateAdd","_trim","_min","_max","_length","value","resolve"],"mappings":"6MAGA,KAAM,CAACA,EAAMC,CAAO,EAAIC,IAClB,CAACC,EAAKC,CAAM,EAAIF,IAChB,CAACG,EAAKC,CAAM,EAAIJ,IAChB,CAACK,EAAQC,CAAS,EAAIN,gBAErB,MAAMO,UAAmBC,CAAK,CAA9B,kCACLC,EAAA,KAAAC,EAAA,QACAD,EAAA,KAAAE,EAAA,QACAF,EAAA,KAAAG,EAAA,QACAH,EAAA,KAAAI,EAAA,QAEA,IAAI,UAAoB,CACf,OAAA,OAAO,KAAK,MAAM,OAAU,QACrC,CAEA,SAAgB,CACV,KAAK,UAAYf,EAAK,IAAI,GAC5B,KAAK,MAAM,aAAa,KAAK,MAAM,MAAM,MAAM,CAEnD,CAEA,MAAO,CACL,OAAAC,EAAQ,KAAM,EAAI,EACX,IACT,CAEA,IAAIe,EAAe,CACjB,OAAAZ,EAAO,KAAMY,CAAK,EACX,IACT,CAEA,IAAIA,EAAe,CACjB,OAAAV,EAAO,KAAMU,CAAK,EACX,IACT,CAEA,OAAOA,EAAe,CACpB,OAAAR,EAAU,KAAMQ,CAAK,EACd,IACT,CAEA,IAAI,gBAAyB,CACvB,GAAC,KAAK,SAEV,IACE,OAAOb,EAAI,IAAI,EAAM,KACrB,OAAOE,EAAI,IAAI,EAAM,MACpB,KAAK,MAAM,MAAM,OAASF,EAAI,IAAI,GACjC,KAAK,MAAM,MAAM,OAASE,EAAI,IAAI,GAEpC,MAAO,iCAAiCF,EAAI,IAAI,CAAC,QAAQE,EACvD,IACD,CAAA,eAED,GAAA,OAAOF,EAAI,IAAI,EAAM,KACrB,KAAK,MAAM,MAAM,OAASA,EAAI,IAAI,EAElC,MAAO,8CAA8CA,EACnD,IACD,CAAA,eAED,GAAA,OAAOE,EAAI,IAAI,EAAM,KACrB,KAAK,MAAM,MAAM,OAASA,EAAI,IAAI,EAE3B,MAAA,mEAEP,GAAA,OAAOE,EAAO,IAAI,EAAM,KACxB,KAAK,MAAM,MAAM,SAAWA,EAAO,IAAI,EAEhC,MAAA,+BAA+BA,EAAO,IAAI,CAAC,mBA1B3C,OAAA,iCA4BF,MAAA,EACT,CACA,UAA6B,CACpB,OAAA,IAAI,QAASU,GAAY,CAC9BA,EACE,KAAK,WACD,CAAC,KAAK,MAAM,OAAS,KAAK,gBACxB,OAAOd,EAAI,IAAI,EAAM,KACrB,KAAK,MAAM,MAAM,QAAUA,EAAI,IAAI,KAClC,OAAOE,EAAI,IAAI,EAAM,KACpB,KAAK,MAAM,MAAM,QAAUA,EAAI,IAAI,KACpC,OAAOE,EAAO,IAAI,EAAM,KACvB,KAAK,MAAM,MAAM,SAAWA,EAAO,IAAI,GAAA,CACjD,CACD,CACH,CACF,CAjFEK,EAAA,YACAC,EAAA,YACAC,EAAA,YACAC,EAAA"}