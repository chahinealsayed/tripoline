import{g as T}from"./m0006e5d5f2f1d6ce.js";import{l as P}from"./m1f9feaba4f71d948.js";var I={};I.__esModule=!0;function F(n,i,t){var e=void 0;return function(){var a=this,s=arguments;clearTimeout(e),e=setTimeout(function(){e=null,t||n.apply(a,s)},i),t&&!e&&n.apply(a,s)}}I.default=F;var W={};W.__esModule=!0;var N=function(){function n(i,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}();function q(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var k=function(){function n(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};q(this,n),this.colors=i.colors,this.parent=i.parent,this.context=i.context,this.isDirty=!0}return N(n,[{key:"revalidate",value:function(){this.isDirty=!0}},{key:"setColors",value:function(t){this.colors=t}},{key:"paint",value:function(){if(this.isDirty){var t=this.parent,e=this.context;if(!this.colors||!this.colors.length?e.clearRect(0,0,t.width,t.height):(e.fillStyle=this.colors[0],e.fillRect(0,0,t.width,t.height)),this.colors&&this.colors.length>1){var a=t.height,s=32,h=t.width/s,o=Math.ceil(a/h);e.fillStyle=this.colors[1];for(var r=0;r<s;r+=1)for(var u=0;u<o;u+=1)(r+u)%2===0&&e.fillRect(r*h,u*h,h,h)}this.isDirty=!1}}}]),n}();k.create=function(n){return new k(n)};W.default=k;var H={},y={};y.__esModule=!0;var U=function(){function n(i,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}();function X(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var m=function(){function n(i,t,e,a){X(this,n),this._x=i,this._y=t,this._width=e,this._height=a}return U(n,[{key:"copy",value:function(t){return this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height,this}},{key:"clone",value:function(){return n.create(this._x,this._y,this._width,this._height)}},{key:"round",value:function(){var t=this._x,e=this._y;return this._x=Math.round(t),this._y=Math.round(e),t-=this._x,e-=this._y,this._width=Math.round(this._width+t),this._height=Math.round(this._height+e),this}},{key:"isInside",value:function(t){return t.x>=this.left&&t.y>=this.top&&t.x<this.right&&t.y<this.bottom}}]),n}();Object.defineProperties(m.prototype,{x:{get:function(){return this._x},set:function(i){this._x=i}},y:{get:function(){return this._y},set:function(i){this._y=i}},centerX:{get:function(){return this._x+this._width*.5},set:function(i){this._x=i-this._width*.5}},centerY:{get:function(){return this._y+this._height*.5},set:function(i){this._y=i-this._height*.5}},width:{get:function(){return this._width},set:function(i){this._width=i}},height:{get:function(){return this._height},set:function(i){this._height=i}},left:{get:function(){return this._x},set:function(i){this._width=this._x+this._width-i,this._x=i}},top:{get:function(){return this._y},set:function(i){this._height=this._y+this._height-i,this._y=i}},right:{get:function(){return this._x+this._width},set:function(i){this._width=i-this._x}},bottom:{get:function(){return this._y+this._height},set:function(i){this._height=i-this._y}},aspectRatio:{get:function(){return this._width/this._height}}});m.create=function(n,i,t,e){return new m(n,i,t,e)};y.default=m;H.__esModule=!0;var Y=function(){function n(i,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}(),V=y,G=Q(V);function Q(n){return n&&n.__esModule?n:{default:n}}function K(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var L=function(){function n(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};K(this,n),this.bounds=G.default.create(0,0,0,0),this.image=i.image||null,this.parent=i.parent,this.context=i.context}return Y(n,[{key:"setImage",value:function(t){this.image=t}},{key:"revalidate",value:function(){var t=this.parent,e=this.image,a=this.bounds;e&&(e.width/e.height>=t.width/t.height?(a.width=t.width,a.height=Math.ceil(e.height/e.width*t.width),a.x=0,a.y=Math.floor((t.height-a.height)*.5)):(a.width=Math.ceil(e.width/e.height*t.height),a.height=t.height,a.x=Math.floor((t.width-a.width)*.5),a.y=0))}},{key:"paint",value:function(){var t=this.context,e=this.image,a=this.bounds;e&&e.hasLoaded&&t.drawImage(e.source,0,0,e.width,e.height,a.x,a.y,a.width,a.height)}}]),n}();L.create=function(n){return new L(n)};H.default=L;var $={},b={};b.__esModule=!0;var J=function(){function n(i,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}();function Z(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var A=function(){function n(i){Z(this,n),this.events={}}return J(n,[{key:"on",value:function(t,e){return this.events[t]||(this.events[t]=[]),this.events[t].indexOf(e)===-1&&this.events[t].push(e),this}},{key:"off",value:function(t,e){if(this.events[t]){var a=this.events[t].indexOf(e);a!==-1&&this.events[t].splice(a,1)}return this}},{key:"notify",value:function(t,e){var a=this;this.events[t]&&this.events[t].forEach(function(s){s.call(a,e)})}},{key:"clearAll",value:function(){this.events={}}}]),n}();A.create=function(n){return new A(n)};b.default=A;var B={};B.__esModule=!0;var j=function(){function n(i,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}(),tt=y,R=et(tt);function et(n){return n&&n.__esModule?n:{default:n}}function it(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var w=function(){function n(i){it(this,n),this.target=i.target||null,this.bounds=R.default.create(0,0,0,0),this.boundsPx=R.default.create(0,0,0,0),this.region=R.default.create(0,0,0,0),this.initialOpts={x:i.x,y:i.y,width:i.width,height:i.height},this.aspectRatio=i.aspectRatio,this.minWidth=i.minWidth!==void 0?i.minWidth:100,this.minHeight=i.minHeight!==void 0?i.minHeight:100,this.boundsMinWidth=0,this.boundsMinHeight=0,this._delta={x:0,h:0}}return j(n,[{key:"getBoundsLengthForRegion",value:function(t){return t/this.region.width*this.width}},{key:"moveBy",value:function(t,e){var a=this.bounds,s=this.target;return a.x=Math.min(Math.max(a.x+t,s.bounds.x),s.bounds.x+s.bounds.width-a.width),a.y=Math.min(Math.max(a.y+e,s.bounds.y),s.bounds.y+s.bounds.height-a.height),this.updateRegionFromBounds()}},{key:"resizeBy",value:function(t,e,a){var s=this._delta,h=this.aspectRatio,o=this.bounds,r=this.boundsMinWidth,u=this.boundsMinHeight,l=this.target;function f(d,c){return s.width=o.width+d,s.height=o.height+c,s.width=Math.max(r,s.width),s.height=Math.max(u,s.height),h&&(s.width/s.height>h?s.width=s.height*h:s.height=s.width/h),s.width-=o.width,s.height-=o.height,s}switch(a[0]==="n"?e=Math.min(e,this.top-l.bounds.top):a[0]==="s"&&(e=Math.min(e,l.bounds.bottom-this.bottom)),a[1]==="w"?t=Math.min(t,this.left-l.bounds.left):a[1]==="e"&&(t=Math.min(t,l.bounds.right-this.right)),s=f(t,e),a){case"nw":this.left-=s.width,this.top-=s.height;break;case"ne":this.right+=s.width,this.top-=s.height;break;case"sw":this.left-=s.width,this.bottom+=s.height;break;case"se":this.right+=s.width,this.bottom+=s.height;break}return this.updateRegionFromBounds()}},{key:"autoSizeRegion",value:function(){var t=this.target,e=this.region,a=this.aspectRatio,s=this.initialOpts,h=e.x,o=e.y,r=e.width,u=e.height;return e.x=s.x!==void 0?s.x:0,e.y=s.y!==void 0?s.y:0,e.width=s.width!==void 0?s.width:t.image.width,e.height=s.height!==void 0?s.height:t.image.height,a&&(e.width/e.height>a?e.width=e.height*a:e.height=e.width/a),s.x===void 0&&(e.centerX=t.image.width*.5),s.y===void 0&&(e.centerY=t.image.height*.5),e.round(),this.updateBoundsFromRegion(),e.x!==h||e.y!==o||e.width!==r||e.height!==u}},{key:"updateRegionFromBounds",value:function(){var t=this.target,e=this.region,a=this.bounds,s=e.x,h=e.y,o=e.width,r=e.height;return e.x=t.image.width*(a.x-t.bounds.x)/t.bounds.width,e.y=t.image.height*(a.y-t.bounds.y)/t.bounds.height,e.width=t.image.width*(a.width/t.bounds.width),e.height=t.image.height*(a.height/t.bounds.height),e.round(),e.x!==s||e.y!==h||e.width!==o||e.height!==r}},{key:"updateBoundsFromRegion",value:function(){var t=this.target,e=this.region,a=this.bounds;t.image&&(a.x=t.bounds.x+t.bounds.width*(e.x/t.image.width),a.y=t.bounds.y+t.bounds.height*(e.y/t.image.height),a.width=t.bounds.width*(e.width/t.image.width),a.height=t.bounds.height*(e.height/t.image.height)),this.boundsMinWidth=this.getBoundsLengthForRegion(this.minWidth),this.boundsMinHeight=this.getBoundsLengthForRegion(this.minHeight)}},{key:"isInside",value:function(t){return this.bounds.isInside(t)}}]),n}();Object.defineProperties(w.prototype,{x:{get:function(){return this.bounds.x},set:function(i){this.bounds.x=i}},y:{get:function(){return this.bounds.y},set:function(i){this.bounds.y=i}},width:{get:function(){return this.bounds.width},set:function(i){this.bounds.width=i}},height:{get:function(){return this.bounds.height},set:function(i){this.bounds.height=i}},left:{get:function(){return this.bounds.x},set:function(i){this.bounds.left=i}},top:{get:function(){return this.bounds.y},set:function(i){this.bounds.top=i}},right:{get:function(){return this.bounds.right},set:function(i){this.bounds.right=i}},bottom:{get:function(){return this.bounds.bottom},set:function(i){this.bounds.bottom=i}}});w.create=function(n){return new w(n)};B.default=w;$.__esModule=!0;var nt=function(){function n(i,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}(),at=P,st=x(at),ht=b,rt=x(ht),ot=B,ut=x(ot),lt=y,ft=x(lt);function x(n){return n&&n.__esModule?n:{default:n}}function dt(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var p=function(){function n(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};dt(this,n),this.selection=ut.default.create(i),this.parent=i.parent,this.context=i.context,this.context.setLineDash=this.context.setLineDash||function(){},this.target=i.target;var t=i.handle||{};t.length=t.handleLength||32,t.depth=t.depth||3,t.size=t.size||t.length*2,t.color=t.color||"rgba(255, 255, 255, 1.0)",t.activeColor=t.activeColor||"rgba(255, 0, 160, 1.0)",this.handleOpts=t,this.listeners=rt.default.create(),this.touch=(0,st.default)(this.parent.canvas),this.activeRegion=null,this.downBounds=ft.default.create(0,0,0,0),this.touch.on("down",this.onInputDown.bind(this)).on("move",this.onInputMove.bind(this)).on("up",this.onInputUpOrCancel.bind(this)).on("cancel",this.onInputUpOrCancel.bind(this))}return nt(n,[{key:"onInputDown",value:function(t){var e=this.findHitRegion(t);e&&(t.source.preventDefault(),this.activeRegion=e,this.setCursor(e),this.downBounds.copy(this.selection.bounds),this.listeners.notify("start",this.selection.region))}},{key:"onInputMove",value:function(t){var e=this.activeRegion;if(e){t.source.preventDefault();var s=this.selection,h=!1;if(s.bounds.copy(this.downBounds),e==="move")h=s.moveBy(t.tx,t.ty),h&&this.listeners.notify("move",this.selection.region);else{var o=e.substring(0,2),r=o[1]==="w"?-t.tx:t.tx,u=o[0]==="n"?-t.ty:t.ty;h=s.resizeBy(r,u,o),h&&this.listeners.notify("resize",this.selection.region)}h&&this.listeners.notify("change",this.selection.region)}else{var a=this.findHitRegion(t);a?(t.source.preventDefault(),this.setCursor(a)):this.resetCursor()}}},{key:"onInputUpOrCancel",value:function(t){t.source.preventDefault(),this.activeRegion&&(this.activeRegion=null,this.resetCursor(),this.listeners.notify("end",this.selection.region))}},{key:"findHitRegion",value:function(t){var e=null,a=Number.MAX_VALUE,s=this.isWithinNorthWestHandle(t);return s!==!1&&s<a&&(a=s,e="nw-resize"),s=this.isWithinNorthEastHandle(t),s!==!1&&s<a&&(a=s,e="ne-resize"),s=this.isWithinSouthWestHandle(t),s!==!1&&s<a&&(a=s,e="sw-resize"),s=this.isWithinSouthEastHandle(t),s!==!1&&s<a&&(a=s,e="se-resize"),e||(this.isWithinBounds(t)?"move":null)}},{key:"on",value:function(t,e){return this.listeners.on(t,e),this}},{key:"off",value:function(t,e){return this.listeners.off(t,e),this}},{key:"setCursor",value:function(t){this.parent.canvas.style.cursor!==t&&(this.parent.canvas.style.cursor=t)}},{key:"resetCursor",value:function(){this.setCursor("auto")}},{key:"isWithinRadius",value:function(t,e,a,s,h){var o=h*h,r=t-a,u=e-s,l=r*r+u*u;return l<o?l:!1}},{key:"isWithinNorthWestHandle",value:function(t){return this.isWithinRadius(t.x,t.y,this.selection.left,this.selection.top,this.getHandleRadius())}},{key:"isWithinNorthEastHandle",value:function(t){return this.isWithinRadius(t.x,t.y,this.selection.right,this.selection.top,this.getHandleRadius())}},{key:"isWithinSouthWestHandle",value:function(t){return this.isWithinRadius(t.x,t.y,this.selection.left,this.selection.bottom,this.getHandleRadius())}},{key:"isWithinSouthEastHandle",value:function(t){return this.isWithinRadius(t.x,t.y,this.selection.right,this.selection.bottom,this.getHandleRadius())}},{key:"isWithinBounds",value:function(t){return this.selection.isInside(t)}},{key:"getHandleRadius",value:function(){return this.handleOpts.size/2}},{key:"onImageLoad",value:function(){this.autoSizeRegionAndNotify()}},{key:"setAspectRatio",value:function(t){this.selection.aspectRatio=t,this.autoSizeRegionAndNotify()}},{key:"autoSizeRegionAndNotify",value:function(){var t=this.selection.autoSizeRegion();t&&this.listeners.notify("change",this.selection.region)}},{key:"revalidate",value:function(){this.selection.updateBoundsFromRegion()}},{key:"paint",value:function(){this.selection.boundsPx.copy(this.selection.bounds).round(),this.paintOutside(),this.paintInside()}},{key:"paintOutside",value:function(){var t=this.selection.boundsPx,e=this.context,a=this.target,s=a.bounds.x,h=a.bounds.y,o=a.bounds.width,r=a.bounds.right,u=a.bounds.bottom,l=t.x,f=t.y,d=t.height,c=t.right,g=t.bottom;e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(s,h,o,f-h),e.fillRect(s,f,l-s,d),e.fillRect(c,f,r-c,d),e.fillRect(s,g,o,u-g)}},{key:"paintInside",value:function(){var t=this.context,e=this.selection.boundsPx,a=this.activeRegion,s=this.handleOpts,h=Math.min(s.length,e.width*.5),o=Math.min(s.length,e.height*.5),r=s.depth,u=s.color,l=s.activeColor,f=0;t.fillStyle="rgba(255, 255, 255, 0.3)",t.fillRect(e.x+f,e.y,e.width-2*f,r),t.fillRect(e.x+f,e.bottom-r,e.width-2*f,r),t.fillRect(e.x,e.y+f,r,e.height-2*f),t.fillRect(e.right-r,e.y+f,r,e.height-2*f);var d=a==="move";t.fillStyle=d||a==="nw-resize"?l:u,t.fillRect(e.x,e.y,h,r),t.fillRect(e.x,e.y+r,r,o-r),t.fillStyle=d||a==="ne-resize"?l:u,t.fillRect(e.right-h,e.y,h,r),t.fillRect(e.right-r,e.y+r,r,o-r),t.fillStyle=d||a==="sw-resize"?l:u,t.fillRect(e.x,e.bottom-r,h,r),t.fillRect(e.x,e.bottom-o,r,o-r),t.fillStyle=d||a==="se-resize"?l:u,t.fillRect(e.right-h,e.bottom-r,h,r),t.fillRect(e.right-r,e.bottom-o,r,o-r),t.strokeStyle="rgba(255, 255, 255, 0.6)",t.setLineDash([2,3]),t.lineWidth=1,t.beginPath();var c=e.width/3,g=e.height/3;t.moveTo(e.x+c,e.y),t.lineTo(e.x+c,e.y+e.height),t.moveTo(e.x+2*c,e.y),t.lineTo(e.x+2*c,e.y+e.height),t.moveTo(e.x,e.y+g),t.lineTo(e.x+e.width,e.y+g),t.moveTo(e.x,e.y+2*g),t.lineTo(e.x+e.width,e.y+2*g),t.stroke(),t.closePath()}}]),n}();p.create=function(n){return new p(n)};$.default=p;var S={},O={};O.__esModule=!0;var ct="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";function gt(n,i){if(!n.nodeName||n.nodeName.toLowerCase()!=="img")return i(new Error("First argument must an image element"));if(n.src&&n.complete&&n.naturalWidth!==void 0)return i(null,!0);if(n.addEventListener("load",function(){i(null,!1)}),n.addEventListener("error",function(e){i(new Error("Failed to load image '"+(n.src||"")+"'"))}),n.complete){var t=n.src;n.src=ct,n.src=t}}O.default=gt;S.__esModule=!0;var vt=function(){function n(i,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}(),yt=O,bt=D(yt),mt=b,wt=D(mt);function D(n){return n&&n.__esModule?n:{default:n}}function _t(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var C=function(){function n(i){var t=this;if(_t(this,n),this.width=0,this.height=0,this.hasLoaded=!1,this.src=null,this.listeners=wt.default.create(),!!i){if(typeof i=="string"){this.src=i;var e=document.createElement("img");e.src=this.src,i=e}else this.src=i.src;this.source=i,(0,bt.default)(i,function(a){a?t.notify("error",a):(t.hasLoaded=!0,t.width=i.naturalWidth,t.height=i.naturalHeight,t.notify("load",t))})}}return vt(n,[{key:"getAspectRatio",value:function(){return this.hasLoaded?this.width/this.height:1}},{key:"notify",value:function(t,e){var a=this.listeners;setTimeout(function(){a.notify(t,e)},0)}},{key:"on",value:function(t,e){return this.listeners.on(t,e),this}},{key:"off",value:function(t,e){return this.listeners.off(t,e),this}}]),n}();C.create=function(n){return new C(n)};S.default=C;var xt=function(){function n(i,t){for(var e=0;e<t.length;e++){var a=t[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(i,a.key,a)}}return function(i,t,e){return t&&n(i.prototype,t),e&&n(i,e),i}}(),Rt=I,kt=v(Rt),Lt=W,At=v(Lt),pt=H,Ct=v(pt),Mt=$,It=v(Mt),Wt=S,Ht=v(Wt),$t=b,Bt=v($t);function v(n){return n&&n.__esModule?n:{default:n}}function St(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var Ot=400,zt=300,_=function(){function n(i){St(this,n),this.parent=typeof i.parent=="string"?document.querySelector(i.parent):i.parent,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.boundsOpts=i.bounds||{width:"100%",height:"auto"},i.selection=i.selection||{},this.debounceResize=i.debounceResize!==void 0?i.debounceResize:!0,this.listeners=Bt.default.create(),this.parent.appendChild(this.canvas),this.backgroundLayer=At.default.create({parent:this,context:this.context,colors:i.backgroundColors||["#fff","#f0f0f0"]}),this.imageLayer=Ct.default.create({parent:this,context:this.context,image:this.image}),this.selectionLayer=It.default.create({parent:this,context:this.context,target:this.imageLayer,aspectRatio:i.selection.aspectRatio,minWidth:i.selection.minWidth,minHeight:i.selection.minHeight,x:i.selection.x,y:i.selection.y,width:i.selection.width,height:i.selection.height,handle:{color:i.selection.color,activeColor:i.selection.activeColor}});var t=this.listeners,e=this.paint.bind(this);this.selectionLayer.on("start",function(a){e(),t.notify("start",a)}).on("move",function(a){t.notify("move",a)}).on("resize",function(a){t.notify("resize",a)}).on("change",function(a){e(),t.notify("change",a)}).on("end",function(a){e(),t.notify("end",a)}),window.addEventListener("resize",this.debounceResize?(0,kt.default)(this.revalidateAndPaint.bind(this),100):this.revalidateAndPaint.bind(this)),this.setImage(i.image,i.onInit),this.revalidateAndPaint()}return xt(n,[{key:"on",value:function(t,e){return this.listeners.on(t,e),this}},{key:"off",value:function(t,e){return this.listeners.off(t,e),this}},{key:"revalidateAndPaint",value:function(){this.revalidate(),this.paint()}},{key:"revalidate",value:function(){var t=this.parent,e=this.image,a=this.boundsOpts.width,s=this.boundsOpts.height,h=0,o=0;E(a)?h=a:t&&M(a)?h=Math.round(t.clientWidth*z(a)/100):h=Ot,E(s)?o=s:M(s)?o=Math.round(h*z(s)/100):e&&e.hasLoaded&&Dt(s)?o=Math.floor(h/e.getAspectRatio()):o=zt,this.resizeCanvas(h,o),this.backgroundLayer.revalidate(),this.imageLayer.revalidate(),this.selectionLayer.revalidate()}},{key:"paint",value:function(){var t=this.context;t.save(),t.scale(this.ratio,this.ratio),this.backgroundLayer.paint(),this.image&&this.image.hasLoaded&&(this.imageLayer.paint(),this.selectionLayer.paint()),t.restore()}},{key:"resizeCanvas",value:function(t,e){var a=this.canvas;this.ratio=window.devicePixelRatio||1,this.width=t,this.height=e,a.width=this.width*this.ratio,a.height=this.height*this.ratio}},{key:"setImage",value:function(t,e){var a=this,s=Ht.default.create(t).on("load",function(){a.selectionLayer.onImageLoad(),a.revalidateAndPaint(),e&&e()}).on("error",function(h){console.error(h)});this.imageLayer.setImage(s),this.image=s,this.revalidateAndPaint()}},{key:"getImage",value:function(){return this.image}},{key:"setAspectRatio",value:function(t){this.selectionLayer.setAspectRatio(t),this.revalidateAndPaint()}},{key:"setBounds",value:function(t){this.boundsOpts=t,this.revalidateAndPaint()}},{key:"setBackgroundColors",value:function(t){this.backgroundLayer.setColors(t),this.revalidateAndPaint()}}]),n}();_.create=function(n){return new _(n)};_.prototype.dispose=Et;function Et(){}function M(n){if(typeof n!="string"||n.length<1)return!1;if(n[n.length-1]==="%")return!0}function z(n){return M(n)?n.slice(0,-1):0}function Dt(n){return n==="auto"}function E(n){return typeof n=="number"&&Math.round(n)===n}var Tt=_;const Nt=T(Tt);export{Nt as C};
//# sourceMappingURL=md74f29767a891470.js.map
