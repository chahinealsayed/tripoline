import{c as x,a as I}from"../chunk/app.js";import{t as o}from"../chunk/index.js";import{R as V,M as D,a as f,b as v,s as B,B as g,S as d}from"../chunk/StringInput.js";import{S as R}from"../chunk/string.js";import{c as M,F as u,C as T,M as U,f as $}from"../chunk/ModalForm.js";import{I as w}from"../chunk/Icon.js";import{m as q,a as z}from"../chunk/m6cd080c8112b9076.js";import{R as E}from"../chunk/RadioInput.js";import{d as W,k as K,p as L,a as i,q as l,F as O,r as S,s as r}from"../chunk/mc55b2a42316522d6.js";import{r as y,u as m}from"../chunk/m6bdda40d8bd2cf5a.js";import{K as C,x as j}from"../chunk/ma6cfd38af5d4c661.js";import{_ as G}from"../chunk/_plugin-vue_export-helper.js";import"../chunk/m21bbc25c9f3922b4.js";import"../chunk/m62faa42f30679aac.js";import"../chunk/m14e047058b3edf4a.js";import"../chunk/m78c574d5c3843a3d.js";import"../chunk/m3fc8d974e5d8216d.js";import"../chunk/m110db13e4dc1cf62.js";import"../chunk/ma0e3fbddd3785020.js";import"../chunk/m0006e5d5f2f1d6ce.js";import"../chunk/strings.js";import"../chunk/Modal.js";const[P,H]=x(),[J,A]=x();class Q extends V{init(){super.init(),A(this,()=>(e,c)=>e.field.value===c.value)}compareWith(e){return H(this,e),this}validation(e){A(this,()=>e)}get defaultMessage(){return`{attribute} is not matched ${P(this).label}`}validate(){return new Promise(e=>{e(!this.field.value||J(this)(this,P(this)))})}}class X extends D{get id(){var e;return this.field("id",o("ID"),((e=this.initData)==null?void 0:e.id)??"")}get username(){var e;return this.field("username",o("Username"),((e=this.initData)==null?void 0:e.username)??"")}get password(){return this.field("password",o("Password"),"")}get confirmPassword(){return this.field("confirm_password",o("Confirm Password"),"")}get status(){var e;return this.field("status",o("Status"),((e=this.initData)==null?void 0:e.status)??"enabled")}get rules(){return[[[this.username,this.password,this.confirmPassword],R],[[this.username],f],[[this.password,this.confirmPassword],f,e=>e.enabled(()=>this.isNewRecord)],[[this.confirmPassword],Q,e=>e.compareWith(this.password)]]}}const Y=r("span",{class:"text-light"},"Edit",-1),Z=r("div",{class:"h6 mb-3"},"User Information",-1),ee={class:"mb-4"},se=r("div",{class:"h6 mb-3"},"Login Authentication",-1),te={class:"mb-4"},ae={class:"row mb-4"},ie={class:"col-md-6"},re={class:"col-md-6"},ne=W({__name:"Admins",setup(h){const e=M({type:u.Number,name:"id",label:"ID",fitable:!0,sortable:!0,searchable:!0},{type:u.String,name:"name",label:"Name",fitable:!1,sortable:!0,searchable:!0},{type:u.String,name:"username",label:"Username",fitable:!0,sortable:!0,searchable:!0},{type:u.String,name:"status",label:"Status",fitable:!0,sortable:!0,searchable:!0});class c extends D{get id(){var t;return this.field("id",o("ID"),((t=this.initData)==null?void 0:t.id)??"")}get name(){var t;return this.field("name",o("Name"),((t=this.initData)==null?void 0:t.name)??"")}get user(){return this.hasOne("user",t=>new X(t))}get rules(){return[[[this.name],R],[[this.name],f]]}}const _=y(null),p=y(null),k=()=>{var a,t;(t=(a=p.value)==null?void 0:a.open)==null||t.call(a)},F=a=>{var t,s;(s=(t=p.value)==null?void 0:t.open)==null||s.call(t,a)},N=(a,t)=>{let s;a.isNewRecord?s=v().post("/admins",a.data):s=v().put(`/admins/${a.id.value}`,a.data),s.then(()=>{var n;B(`${a.name.value}`,"Admin Saved Successfully"),(n=_.value)==null||n.refresh(),t()})};return(a,t)=>(K(),L(O,null,[i(T,{ref_key:"crud",ref:_,fields:m(e),fetch:m($)("/admins","user")},{usernameValue:l(({item:s})=>{var n;return[S(C(((n=s.user)==null?void 0:n.username)??"--"),1)]}),statusValue:l(({item:s})=>{var n,b;return[r("span",{class:j({"text-success":((n=s.user)==null?void 0:n.status)==="enabled"})},C((b=s.user)==null?void 0:b.status),3)]}),actions:l(({item:s})=>[i(g,{color:"info",size:"sm",onClick:n=>F(s)},{default:l(()=>[i(w,{path:m(q),color:"light"},null,8,["path"]),Y]),_:2},1032,["onClick"])]),topActions:l(()=>[i(g,{color:"primary",onClick:k},{default:l(()=>[i(w,{path:m(z),color:"light"},null,8,["path"]),S(" Add New Admin ")]),_:1})]),_:1},8,["fields","fetch"]),i(U,{name:"Admin","model-class":c,size:"lg",ref_key:"modal",ref:p,onSave:N},{default:l(({model:s})=>[Z,r("div",ee,[i(d,{field:s.name},null,8,["field"])]),se,r("div",te,[i(d,{field:s.user.username},null,8,["field"])]),r("div",ae,[r("div",ie,[i(d,{field:s.user.password,type:"password"},null,8,["field"])]),r("div",re,[i(d,{field:s.user.confirmPassword,type:"password"},null,8,["field"])])]),r("div",null,[i(E,{field:s.user.status,options:[{value:"enabled",label:"Enabled"},{value:"disabled",label:"Disabled"},{value:"pending",label:"Pending"}],inline:""},null,8,["field"])])]),_:1},512)],64))}}),le=G(ne,[["__file","Admins.vue"]]),oe=I("admins",le);oe.mount();
//# sourceMappingURL=admins.js.map
