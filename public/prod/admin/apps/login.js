import{a as N}from"../chunk/app.js";import{w as U}from"../chunk/m78c574d5c3843a3d.js";import{c as $,_ as k,B as D,b as T,M as F,a as P}from"../chunk/StringInput.vue_vue_type_script_setup_true_lang.js";import{S as R}from"../chunk/string.js";import{l as V,n as q,o as A}from"../chunk/m6cd080c8112b9076.js";import{I as _}from"../chunk/Icon.js";import{i as C,m as j}from"../chunk/index.js";import{d as S,o as G,f as K,k as y,p as I,s as i,a as s,q as h,v as O,r as g,l as Y,T as z,F as H}from"../chunk/mc55b2a42316522d6.js";import{r as J,u as r}from"../chunk/m6bdda40d8bd2cf5a.js";import{K as Q}from"../chunk/ma6cfd38af5d4c661.js";import"../chunk/m21bbc25c9f3922b4.js";import"../chunk/m62faa42f30679aac.js";import"../chunk/m3fc8d974e5d8216d.js";import"../chunk/m110db13e4dc1cf62.js";import"../chunk/_plugin-vue_export-helper.js";import"../chunk/ma0e3fbddd3785020.js";import"../chunk/m0006e5d5f2f1d6ce.js";import"../chunk/strings.js";const W=["onSubmit"],X={class:"d-flex justify-content-center align-items-center"},Z=S({__name:"Login",props:{redirectUrl:{default:""}},setup(v){class w extends F{get username(){var n;return this.field("username","Username",((n=this.initData)==null?void 0:n.username)??"")}get password(){var n;return this.field("password","Password",((n=this.initData)==null?void 0:n.password)??"")}get rules(){return[[[this.username,this.password],R],[[this.username,this.password],P]]}}const d=J(null),[a,M,B]=$(w),E=()=>{var m,n;(n=(m=a.value)==null?void 0:m.validate())==null||n.then(L=>{var p,b,x;L&&((b=(p=d.value)==null?void 0:p.start)==null||b.call(p),T().post("/login",((x=a.value)==null?void 0:x.data)??{}).then(({data:t})=>{var o,l;if(t.code===200){const e=document.createElement("form");e.name="login",e.method="POST",e.action=`${(l=(o=j())==null?void 0:o.url)==null?void 0:l.self}/Login`,e.style.visibility="hidden",e.style.width="0px",e.style.height="0px",e.style.overflow="hidden",e.style.opacity="0";const c=document.createElement("input");c.type="hidden",c.name="token",c.value=t.token,e.appendChild(c);const u=document.createElement("input");u.type="hidden",u.name="expire",u.value=t.expire,e.appendChild(u);const f=document.createElement("input");f.type="hidden",f.name="redirectUrl",f.value=v.redirectUrl??"",e.appendChild(f),document.body.appendChild(e),e.submit()}}).catch(t=>{var o,l;(l=(o=a.value)==null?void 0:o.addRemoteErrors)==null||l.call(o,t)}).finally(()=>{var t,o;(o=(t=d.value)==null?void 0:t.stop)==null||o.call(t)}))})};return G(()=>{M()}),K(()=>{B()}),(m,n)=>r(a)?(y(),I("form",{key:0,onSubmit:U(E,["prevent"]),class:"login-form"},[i("div",null,[s(k,{field:r(a).username},{before:h(()=>[s(_,{path:r(V),color:r(C)()?"info":"primary"},null,8,["path","color"])]),_:1},8,["field"])]),i("div",null,[s(k,{field:r(a).password,type:"password"},{before:h(()=>[s(_,{path:r(q),color:r(C)()?"info":"primary"},null,8,["path","color"])]),_:1},8,["field"])]),i("div",X,[s(D,{type:"submit",color:"primary",class:"fw-bold w-100","spinner-color":"light",ref_key:"button",ref:d},{default:h(()=>[s(_,{path:r(A),color:"info"},null,8,["path"]),g("SIGN IN")]),_:1},512)])],40,W)):O("",!0)}});const ee={class:"admin-login-box"},te={class:"copyright"},oe=i("a",{href:"https://codendot.com",target:"_blank"},"Codendot",-1),ne=S({__name:"Login",setup(v){return(w,d)=>(y(),I(H,null,[i("div",ee,[s(Z)]),(y(),Y(z,{to:"body"},[i("div",te,[g(" Powered by "),oe,g(" "+Q(new Date().getFullYear()),1)])]))],64))}});const re=N("login",ne);re.mount();
